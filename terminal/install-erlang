# Install the latest Erlang / OTP release.
# Depends on asdf, so this should run after install-asdf.
# Also, this needs to be run in a new shell (bash -c <name>) 
# so that asdf's shell config is picked up.

# Pre-reqs - make sure these are in place BEFORE calling asdf install.
# See: https://github.com/asdf-vm/asdf-erlang?tab=readme-ov-file#before-asdf-install
# NOTE: I'm assuming Ubuntu 24.04

sudo apt-get -y install build-essential \
                autoconf m4 \
                libncurses5-dev \
                libwxgtk3.2-dev \
                libwxgtk-webview3.2-dev \
                libgl1-mesa-dev \
                libglu1-mesa-dev \
                libpng-dev \
                libssh-dev \
                unixodbc-dev \
                xsltproc fop \
                libxml2-utils \
                libncurses-dev #\
                #openjdk-11-jdk

# Try without openjdk. By the time this runs, devbox will already have installed
# a JDK though not necessarily openjdk-11-jdk. 

# Add the Erlang plugin. See https://github.com/asdf-vm/asdf-erlang
asdf plugin add erlang https://github.com/asdf-vm/asdf-erlang.git

# We can get the latest version
# https://asdf-vm.com/guide/getting-started.html#_5-install-a-version
asdf install erlang latest

# And make the latest version the default, globally:
asdf global erlang latest
